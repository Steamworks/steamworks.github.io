<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Steamworks.NET - Getting Started</title>

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="/css/theme.css" type="text/css" />


  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script type="text/javascript" src="/js/theme.js"></script>
  <script type="text/javascript" src="/js/toc.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('.toc').toc();
    });
  </script>

  <link rel="stylesheet" href="/css/github.css">
  <script type="text/javascript" src="/js/highlight.pack.js"></script>
  <script type="text/javascript">hljs.initHighlightingOnLoad();</script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>


  <style>
    body {font-size: 90%;}
    pre, code {font-size: 100%;}
    h3, h4, h5, h6 {color: #2980b9; font-weight: 300}
    h1:first-of-type {
      text-align: center;
      font-weight: 300;
      font-size: 40px;
      margin-bottom: 10px;
    }
  </style>
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="/" class="icon icon-home"> Steamworks.NET</a>
        <!--<div role="search">
  <form id ="rtd-search-form" class="wy-form" action="" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>-->
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
      <ul class="current">
    
        
        

    <li class="toctree-l1 ">
        <a class="" href="/installation/">Installation</a>
        
    </li>
    
        
        
            
        

    <li class="toctree-l1 current">
        <a class="current" href="/gettingstarted/">Getting started</a>
        <div class="toc"></div>
    </li>
    
        
        

    <li class="toctree-l1 ">
        <a class="" href="/steammanager/">SteamManager</a>
        
    </li>
    
        
        

    <li class="toctree-l1 ">
        <a class="" href="/snippits/">Code Snippits</a>
        
    </li>
    
        
        

    <li class="toctree-l1 ">
        <a class="" href="/faq/">Frequently Asked Questions</a>
        
    </li>
    
        
        

    <li class="toctree-l1 ">
        <a class="" href="/support/">Support</a>
        
    </li>
    
        
        

    <li class="toctree-l1 ">
        <a class="" href="/gameslist/">Games using Steamworks.NET</a>
        
    </li>
    
        
        

    <li class="toctree-l1 ">
        <a class="" href="/changelog/">Changelog</a>
        
    </li>
    
</ul>

      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/"></a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="/">Docs</a> &raquo;</li>
    <li>Getting Started</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>

          <div role="main">
            <h1>Getting Started</h1>
            <hr>
            <h2 id="getting-started-with-steamworksnet">Getting Started with Steamworks.NET</h2>

<p>After completing the <a href="/installation/">Installation</a> steps you can start using Steamworks.NET in your project.</p>

<p>The SteamManager script provides the ideal starting point for your project and I would highly recommend utilizing it as it will signifigently cut down on the time required to get up and running.</p>

<p>If you are using Steamworks.NET from the .unitypackage you can import it directly into your project. Otherwise if you have cloned Steamworks.NET from Github you must download the <a href="https://raw.githubusercontent.com/rlabrecque/SteamManager/master/SteamManager.cs">SteamManager.cs</a> script manually.</p>

<p>Once the SteamManager script is in your project simply create a new empty GameObject in your first scene and add the SteamManager script to it.</p>

<p>You can now be able to launch your game and Steam should show you in-game.</p>

<hr />

<p>Next, once you have that working I would then recommend trying out an easy SteamAPI method call.</p>

<p>We’ll create a new script called <code>SteamScript.cs</code>:</p>

<p>First we’ll add <code>using Steamworks;</code> to the file.</p>

<pre><code>using UnityEngine;
using System.Collections;
using Steamworks;</code></pre>

<p>Next we’ll add our function call which gets the display name of the Steam user like so.</p>

<pre><code>public class SteamScript : MonoBehaviour {
	void Start() {
		if(SteamManager.Initialized) {
			string name = SteamFriends.GetPersonaName();
			Debug.Log(name);
		}
	}
}</code></pre>

<p>Note that we ALWAYS ensure that Steam is initalized by checking SteamManager.Initialized before calling any Steamworks functions.</p>

<p>Now just add the script to a GameObject and try it out!</p>

<p>If you run into any issues have a look at the <a href="/faq/">Frequently Asked Questions</a> to see if it’s covered in there!</p>

<p>You are successfully using Steamworks!</p>

<h3 id="steam-callbacks">Steam Callbacks</h3>

<p>Callbacks are an important feature of Steamworks, they allow you to retrieve data asynchronously from Steam without locking up your game.</p>

<p>One such Callback that you will likely wish to utilize is called <code>GameOverlayActivated_t</code>. As the name implies it sends you a callback every time the Steam Overlay is activated or deactivated.</p>

<p>To use it we will continue with our script from earlier.</p>

<p>To use Callbacks in Steamworks.NET you first declare a <code>protected Callback&lt;&gt;</code> at class scope as a member variable to hold onto the Callback.</p>

<pre><code>public class SteamScript : MonoBehaviour {
	protected Callback&lt;GameOverlayActivated_t&gt; m_GameOverlayActivated;
}</code></pre>

<p>We then create our Callback by calling <code>Callback&lt;&gt;.Create()</code> and assigning it to m_GameOverLayActivated.</p>

<p>We do this in OnEnable as that allows us to recreate the Callback after Unity reloads assemblies.</p>

<pre><code>public class SteamScript : MonoBehaviour {
	protected Callback&lt;GameOverlayActivated_t&gt; m_GameOverlayActivated;

	private void OnEnable() {
		if (SteamManager.Initialized) {
			m_GameOverlayActivated = Callback&lt;GameOverlayActivated_t&gt;.Create(OnGameOverlayActivated);
		}
	}
}</code></pre>

<p>The last piece of the puzzle is the OnGameOverlayActivated function.</p>

<pre><code>public class SteamScript : MonoBehaviour {
	protected Callback&lt;GameOverlayActivated_t&gt; m_GameOverlayActivated;

	private void OnEnable() {
		if (SteamManager.Initialized) {
			m_GameOverlayActivated = Callback&lt;GameOverlayActivated_t&gt;.Create(OnGameOverlayActivated);
		}
	}

	private void OnGameOverlayActivated(GameOverlayActivated_t pCallback) {
		if(pCallback.m_bActive) {
			Debug.Log("Steam Overlay has been activated");
		}
		else {
			Debug.Log("Steam Overlay has been closed");
		}
	}
}</code></pre>

<p>And that’s it!</p>

<p>One popular use case for the GameOverlayActivated Callback is to pause the game when the overlay opens.</p>

<h3 id="steam-callresults">Steam CallResults</h3>

<p>There is one last aspect that this guide will cover and that is CallResults.</p>

<p>CallResults are very similar to Callbacks but they are the asyncronous result of a specific function call rather than a global event sink like Callbacks.</p>

<p>You can identify a function that provides a CallResult by inspecting it’s return value. If it returns <code>SteamAPICall_t</code> then you must set up a CallResult.</p>

<p>In Steamworks.NET setting up a CallResult is nearly identical to Callbacks!</p>

<p>First we declare a <code>CallResult&lt;&gt;</code> at class scope as a member variable.</p>

<pre><code>public class SteamScript : MonoBehaviour {
	private CallResult&lt;NumberOfCurrentPlayers_t&gt; m_NumberOfCurrentPlayers;
}</code></pre>

<p>Next we can create our CallResult with <code>CallResult&lt;&gt;.Create</code>. Once again we do this in OnEnable so that it gets recreated every time Unity reloads the assembilies.</p>

<pre><code>public class SteamScript : MonoBehaviour {
	private CallResult&lt;NumberOfCurrentPlayers_t&gt; m_NumberOfCurrentPlayers;

	private void OnEnable() {
		if (SteamManager.Initialized) {
			m_NumberOfCurrentPlayers = CallResult&lt;NumberOfCurrentPlayers_t&gt;.Create(OnNumberOfCurrentPlayers);
		}
	}
}</code></pre>

<p>Once again, we create our function which gets called asyncronously.</p>

<p>The function signature of a CallResult is slightly different than a Callback with the addition of <code>bool bIOFailure</code>.</p>

<pre><code>public class SteamScript : MonoBehaviour {
	private CallResult&lt;NumberOfCurrentPlayers_t&gt; m_NumberOfCurrentPlayers;

	private void OnEnable() {
		if (SteamManager.Initialized) {
			m_NumberOfCurrentPlayers = CallResult&lt;NumberOfCurrentPlayers_t&gt;.Create(OnNumberOfCurrentPlayers);
		}
	}

	private void OnNumberOfCurrentPlayers(NumberOfCurrentPlayers_t pCallback, bool bIOFailure) {
		if (pCallback.m_bSuccess != 1 || bIOFailure) {
			Debug.Log("There was an error retrieving the NumberOfCurrentPlayers.");
		}
		else {
			Debug.Log("The number of players playing your game: " + pCallback.m_cPlayers);
		}
	}
}</code></pre>

<p>Finally the last thing that we need is to call a function which returns the CallResult and then associate the SteamAPICall_t handle which it returns with our CallResult.</p>

<pre><code>public class SteamScript : MonoBehaviour {
	private CallResult&lt;NumberOfCurrentPlayers_t&gt; m_NumberOfCurrentPlayers;

	private void OnEnable() {
		if (SteamManager.Initialized) {
			m_NumberOfCurrentPlayers = CallResult&lt;NumberOfCurrentPlayers_t&gt;.Create(OnNumberOfCurrentPlayers);
		}
	}

	private void Update() {
		if(Input.GetKeyDown(KeyCode.Space)) {
			SteamAPICall_t handle = SteamUserStats.GetNumberOfCurrentPlayers();
			m_NumberOfCurrentPlayers.Set(handle);
			Debug.Log("Called GetNumberOfCurrentPlayers()");
		}
	}

	private void OnNumberOfCurrentPlayers(NumberOfCurrentPlayers_t pCallback, bool bIOFailure) {
		if (pCallback.m_bSuccess != 1 || bIOFailure) {
			Debug.Log("There was an error retrieving the NumberOfCurrentPlayers.");
		}
		else {
			Debug.Log("The number of players playing your game: " + pCallback.m_cPlayers);
		}
	}
}</code></pre>

<p>And that’s it for CallResults!</p>

<p>For both Callbacks and CallResults you must be calling <code>SteamAPI.RunCallbacks</code> on a regular basis. <a href="http://localhost:4000/steammanager/#steamapiruncallbacks">This is done in SteamManager</a>.</p>

<p>Now that you have familiarized yourself with the building blocks of Steamworks check out the <a href="https://github.com/rlabrecque/">Steamworks.NET Example</a> application to see an industrial strength implementation of Steamworks Stats and Achievements!</p>

<p>It’s also recommended that you have a look at Valve’s own documentation on <a href="https://partner.steamgames.com/documentation/getting_started">Getting started with the Steamworks API</a>!</p>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built by <a href="http://rileylabrecque.com">Riley Labrecque</a> using the <a href="https://github.com/snide/sphinx_rtd_theme">Read the Docs theme</a>.
</footer>

        </div>
      </div>

    </section>

  </div>

<!--<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <a href="" target="about:blank" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      <span><a href="" style="color: #fcfcfc;">&laquo; Previous</a></span>
      <span style="margin-left: 15px"><a href="" style="color: #fcfcfc">Next &raquo;</a></span>
    </span>
</div>-->
</body>
</html>